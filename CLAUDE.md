# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Build and Development Commands

```bash
npm start          # Start dev server with HTTPS (https://localhost:4200)
npm run build      # Production build
npm test           # Run tests with Vitest
npm run generate-api  # Regenerate API client from OpenAPI spec
```

## Testing

Tests use Vitest with Angular's TestBed. Test files are co-located with components using `.spec.ts` suffix.

```bash
npm test                           # Run all tests
npx ng test --include="**/app.spec.ts"  # Run a single test file
```

## Architecture

This is an Angular 21 application that provides a UI for ASP.NET Core Identity management. It communicates with a backend API running at `https://localhost:7142` (development) for authentication and user/claims management.

### Key Patterns

**API Client Generation**: The `src/app/api/` directory is auto-generated by Orval from the backend's OpenAPI spec. Do not edit files in this directory manually. Run `npm run generate-api` when the backend API changes (requires backend running on `http://localhost:5248`).

**Authentication Flow**:
- `AuthService` manages login state using Angular signals
- `authInterceptor` prepends the API base URL from environment config and attaches credentials to all requests
- 401 responses automatically redirect to `/login` (except for auth endpoints)

**Environment Configuration**: API URL is configured in `src/environments/environment.ts` (dev) and `environment.prod.ts` (prod). The interceptor reads from this to construct full API URLs.

**Toast Notifications**: Use `ToastService` for user feedback with `success()` and `error()` methods.

### Routes

- `/` - Dashboard
- `/login` - Login form
- `/register` - Registration form
- `/users` - User list
- `/users/:userId/claims` - Manage claims for a specific user

### SSL Setup

The dev server requires SSL certificates in the `ssl/` directory (`localhost.pem` and `localhost.key`). These must exist before running `npm start`.

## Code Style

- Uses Prettier with 100 char print width, single quotes
- HTML files use Angular parser
- Tailwind CSS for styling
